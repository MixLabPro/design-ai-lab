{
  "poster": "data:image/png;base64,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",
  "knowledge": {
    "readme": "## 短视频合成\n\n\n### 从本地文件合成短视频，并添加音乐",
    "course": ""
  },
  "code": "\n// 基础数据\nvar videos = {};\nlet videoObjId;\n\n// 保存变量\nlet variables = [];\n\nvar store = new Store('video_create_by_shadow');\nvar storeKey = (new Date()).getTime().toString();\nvar outputVideo;\n\n// 合成预览\n// 540*960\nvar _WIDTH = Math.min(parseInt(window.innerWidth * 0.8), 240),\n    _HEIGHT = parseInt(_WIDTH * 16 / 9),\n    _SCALE = 4,\n    _OUTPUTDIR = (() => {\n        let p = localStorage.getItem('_OUTPUTDIR');\n        return !!p ? p : null;\n    })();\n\n// UI\nlet pc, info, setupInfo;\n\n// 界面\nlet audioGroup, framesGroup;\nasync function gui() {\n    //隐藏p5的画布\n    Lab.base.p5Show(false);\n    Lab.base.layout(0);\n\n    setupInfo = Lab.base.createBaseText(_OUTPUTDIR || '设置路径');\n    setupInfo.style = `width: 86%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    display: block;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;`;\n    let setupBtn = Lab.base.createIcon('link', _setupFilePath, false);\n    let refreshBtn = Lab.base.createIcon(\"clear\", _newVideo, false);\n\n    let setupBtns = Lab.base.createGroup(setupInfo, setupBtn, refreshBtn);\n\n    setupBtns.layout(6);\n    //Lab.base.add(setupBtns);\n\n    let createBtn = Lab.base.createIcon(\"play\", _createVideo, false);\n    info = Lab.base.createBaseText('开始合成吧！');\n    // let downloadBtn = Lab.base.createIcon('save', _downloadVideo, false);\n    let mainBtns = Lab.base.createGroup(createBtn, info);\n    mainBtns.layout(6);\n\n    let header = Lab.base.createGroup(setupBtns, mainBtns);\n    header.layout(6);\n    Lab.base.add(header);\n\n    audioGroup = Lab.base.createGroup(Lab.base.createIcon('music', () => {\n        Lab.base.toast('推荐背景音乐，待开发');\n    }, false));\n    audioGroup.layout(6);\n    Lab.base.add(audioGroup);\n\n    framesGroup = Lab.base.createGroup();\n    framesGroup.style.padding = '24px';\n    framesGroup.layout(6);\n\n    //framesGroup.children = {};\n    Lab.base.add(framesGroup);\n\n    let editBtn = Lab.base.createIcon(\"square\", _newRect, false);\n    let textBtn = Lab.base.createIcon(\"comment\", _newText, false);\n    let copyBtn = Lab.base.createIcon(\"copy\", _copyRect, false);\n    let editGroup = Lab.base.createGroup(editBtn, textBtn,copyBtn);\n    editGroup.layout(6);\n    Lab.base.add(editGroup);\n\n    pc = new Canvas(_WIDTH, _HEIGHT, false, false);\n\n\n    let previewGroup = Lab.base.createGroup(pc.getElement());\n    previewGroup.layout(0);\n    Lab.base.add(previewGroup);\n\n    createAddCard();\n\n    // 字幕生成\n    const createTextImageAndUpdate = (text, style) => {\n        let id = Lab.base.hash({ text, style });\n        console.log(videos, videoObjId)\n        if (id != videos[videoObjId].textId) {\n            videos[videoObjId] = Object.assign(videos[videoObjId], {\n                textId: id,\n                text,\n                textImage: createTextImage(text, style)\n            })\n        }\n    };\n    // 绑定事件\n    pc.onModified = (opt, json) => {\n        // 矩形变量更改\n        if (opt.target.type == 'rect') {\n            let targetId = null;\n            for (let v of variables) {\n                if (Object.is(opt.target, v.rect)) {\n                    targetId = v.videoObjId;\n                }\n            }\n            if (targetId) {\n                console.log('更新变量区域', videos[targetId])\n            }\n\n        }\n        // 文本修改信息\n        if (opt.target.type === 'textbox') {\n            let style = textStyleExtract(opt.target);\n            const { text } = opt.target;\n            createTextImageAndUpdate(text, style);\n        };\n        // 布局信息\n        updateData(videoObjId, json);\n        // 更新预览图\n        updatePreviewImg(videoObjId);\n    };\n\n\n};\n\nasync function createVideoPreview(url) {\n    outputVideo = await Lab.base.createVideo(url,\n        false);\n    outputVideo.style.width = _WIDTH + 'px';\n    outputVideo.style.height = _HEIGHT + 'px';\n    outputVideo.play();\n}\n\nasync function createAddCard() {\n    let addBtn = Lab.base.createIcon(\"plus\", _addVideo, false);\n    let imBtn = Lab.base.createButton(\"\", () => { }, false);\n    imBtn.appendChild(addBtn);\n    addBtn.style.width = '56px';\n    addBtn.style.borderRadius = 0;\n    addBtn.style.color = '#4a4a4a';\n    addBtn.style.background = 'rgba(255,255,255,0.1)';\n    addBtn.style.height = `${_HEIGHT * 56 / _WIDTH}px`\n    addBtn.style.margin = '2px';\n    imBtn.style = `\n    height: auto;\n    background: #eee;\n    border-radius: 8px;\n    padding: 0;`;\n    framesGroup.appendChild(imBtn);\n}\n\n\n// 添加素材\nasync function _addVideo() {\n    let labVideos = Lab.base.createShortVideoInput();\n    // console.log(labVideos)\n    if (labVideos) {\n        \n        for (let labVideo of labVideos) {\n            // 帧数据\n            labVideo = await baseData(labVideo);\n\n            videos[labVideo.id] = labVideo;\n\n            if (labVideo.type === 'audio') {\n                await baseAddBackgroundAudio(labVideo);\n            } else {\n                await baseAddVideo(labVideo);\n            }\n\n            updateData(labVideo.id);\n        }\n\n    }\n\n}\n// 结果\nasync function _createVideo() {\n    if (!_OUTPUTDIR) _setupFilePath();\n    if (!_OUTPUTDIR) return\n    info.innerText = '正在合成ing';\n    let finishData = createVideoData();\n    if (finishData.frames.length > 0) {\n        Lab.base.loading(0);\n        let src = await Lab.video.mergeAll(finishData, (progress) => {\n            info.innerText = progress.toFixed(2);\n        });\n        await createVideoPreview(src);\n        Lab.base.loading(100);\n        // Lab.base.toast('完成' + outputVideo.src);\n        _save();\n    }\n\n}\n\nfunction _setupFilePath() {\n    // console.log('filePath')\n    let filePath = Lab.base.getFilePath(2);\n    if (filePath && filePath[0]) {\n        _OUTPUTDIR = filePath[0];\n        Lab.video.newDirname = _OUTPUTDIR;\n        setupInfo.innerText = _OUTPUTDIR;\n        localStorage.setItem('_OUTPUTDIR', _OUTPUTDIR);\n    }\n    return _OUTPUTDIR\n    // console.log(filePath)\n}\nasync function _newVideo() {\n    await store.clear();\n    Lab.base.clear();\n    gui();\n}\n\nfunction _newRect() {\n    // 暂时只支持一个变量区域\n    if (variables.filter(v => v.videoObjId === videoObjId).length > 0) return\n    let rect = pc.addRect({\n        left: 0,\n        top: 0,\n        width: _WIDTH,\n        height: _WIDTH,\n        fill: 'rgba(0,255,0,0.3)',\n        lockMovementX: false,\n        lockRotation: false,\n        lockScalingX: false,\n        lockScalingY: false,\n    }, true, true);\n    // console.log(rect);\n    variables.push({\n        rect: rect,\n        videoObjId: videoObjId\n    });\n    videos[videoObjId].variableRect = rect.getBoundingRect();\n\n    let rectInfo = Lab.base.createBaseText('素材');\n    let rectBtn = Lab.base.createIcon('plus', async () => {\n        videos[videoObjId].variableElements = await Lab.base.createShortVideoInput();\n        if (videos[videoObjId].variableElements) {\n            rectInfo.innerText = `素材${videos[videoObjId].variableElements.length}`;\n        }\n    });\n\n    let g = Lab.base.createGroup(rectBtn, rectInfo);\n    g.layout(6);\n    Lab.base.add(g);\n}\n\nfunction _copyRect(){\n    console.log(variables,videos)\n    // variables.push({rect:variables[0].rect,videoObjId:'a555a9c614d00029c2b0ac20063bcf33bbfb67cf'})\n   for(let v of videos){\n       \n   }\n}\nfunction _newText() {\n    pc.addText('TEXT', getTextStyle());\n}\n\n// 关键帧数据\nconst createFrameData = (labVideo) => {\n    let { index, url, type, layout, createTime, id, text, textImage } = labVideo;\n    if (!((index != null || index != undefined) && typeof index === 'number')) index = Object.keys(videos).length;\n    let obj = {\n        index,\n        type,\n        url,\n        text,\n        textImage,\n        layout,\n        createTime: createTime || (new Date()).getTime()\n    };\n    if (!id) {\n        obj.id = Lab.base.hash(obj)\n    } else {\n        obj.id = id;\n    };\n\n    return obj;\n};\n\nconst createTextImage = (text, style) => {\n    let tc = new Canvas(_WIDTH, _HEIGHT, true, false);\n    tc.addText(text, style, false, false);\n    // console.log(style)\n    //TODO  调试\n    // document.body.appendChild(tc.getElement())\n    return tc.toDataURL(_SCALE);\n};\n\n// 计算字幕的停留时间\nconst getTextLoop = text => {\n    text = text || '';\n    return Math.max(parseInt(text.length / 2.5), 5)\n}\n\n// 取布局数据\nconst getLayout = (obj) => {\n    let { top, left, width, height, scaleX, scaleY, angle } = obj;\n    scaleX = scaleX || 1;\n    scaleY = scaleY || 1;\n    return {\n        angle: angle || 0,\n        top: parseInt(top * _SCALE),\n        left: parseInt(left * _SCALE),\n        width: Math.min(parseInt(width * _SCALE * scaleX), _WIDTH * _SCALE),\n        height: Math.min(parseInt(height * _SCALE * scaleY), _HEIGHT * _SCALE)\n    }\n};\n\n\n// 文本的样式\nconst textStyleExtract = obj => {\n    let res;\n    if (obj) {\n        const { top,\n            left,\n            width,\n            height,\n            fill,\n            fontSize,\n            charSpacing,\n            fontFamily,\n            angle,\n            scaleX,\n            scaleY\n        } = obj;\n        res = {\n            top,\n            left,\n            width,\n            height,\n            fill,\n            fontSize,\n            charSpacing: charSpacing || 0,\n            fontFamily,\n            angle: angle || 0,\n            scaleX: scaleX || 1,\n            scaleY: scaleY || 1\n        }\n    } else {\n        res = {\n            top: parseInt(_HEIGHT * 0.1),\n            left: 0,\n            width: _WIDTH,\n            fontSize: parseInt(_HEIGHT * 0.05),\n            fill: \"white\",\n            fontFamily: 'monospace'\n        }\n    }\n    return res\n\n}\n\n// 内容样式\n// 计算居中\nconst contentStyleExtract = (obj, element) => {\n    let res;\n    if (obj) {\n        // width,height是元素真实的尺寸，通过scale来缩放成最终的高宽\n        const { left, top, width, height, angle, scaleX, scaleY } = obj;\n        // console.log(width, height, scaleX, scaleY)\n        res = {\n            left, top,\n            width, height,\n            scaleX: scaleX || 1, scaleY: scaleY || 1,\n            angle: angle || 0\n        }\n    } else {\n        let width = element.width, height = element.height;\n        let scale = _WIDTH / element.width;\n        if (width < _WIDTH) {\n            scale = element.width / _WIDTH;\n        };\n\n        scale = parseFloat(scale.toFixed(2));\n\n        res = {\n            left: parseInt((_WIDTH - width * scale) / 2),\n            top: parseInt((_HEIGHT - height * scale) / 2),\n            width, height,\n            scaleX: scale, scaleY: scale,\n            angle: 0\n        }\n        // console.log(res)\n    }\n    return res\n}\n\nconst getContentStyle = (layout, element) => {\n    let target = layout ? layout.filter(f => f.type === 'image')[0] : null;\n    let res = contentStyleExtract(target, element);\n    // console.log(res)\n    return res\n};\n\nconst getTextStyle = (layout) => {\n    let target = layout ? layout.filter(f => f.type === 'textbox')[0] : null;\n    let res = textStyleExtract(target);\n    return res\n}\n\n// 准备绘制 字幕的数据\nconst getTextAndStyle = labVideo => {\n    // 文字输入\n    let style = getTextStyle(labVideo.layout),\n        text = null;\n    // console.log(textStyle)\n    if (labVideo.text) {\n        text = labVideo.text;\n    };\n    return {\n        element: text,\n        style\n    }\n}\n// 准备绘制 内容的数据\nconst getContentAndStyle = async labVideo => {\n    // 元素\n    let element;\n    if (labVideo.type == \"video\") {\n        element = await Lab.base.createVideo(labVideo.url, false);\n    } else if (labVideo.type == \"img\") {\n        element = await Lab.base.createImage(labVideo.url);\n    };\n    // 样式\n    let style = getContentStyle(labVideo.layout, element);\n    return {\n        element,\n        style\n    }\n}\n\nasync function createPreviewImg(id) {\n    let base64 = pc.toDataURL(1);\n\n    //创建图片\n    let im = await Lab.base.createImage(base64);\n    im.style.width = '56px';\n    im.style.margin = '2px';\n    im.id = id;\n    let imBtn = Lab.base.createButton(\"\", async () => {\n        videoObjId = id;\n        await baseAddVideo(videos[id], false);\n    }, false);\n    imBtn.appendChild(im);\n    imBtn.style = `\n    height: auto;\n    background: #eee;\n    border-radius: 8px;\n    padding: 0;`;\n    framesGroup.appendChild(imBtn);\n    framesGroup.children[id] = im;\n    videos[id].preview = im.src;\n}\n\nfunction updatePreviewImg(id) {\n    let base64 = pc.toDataURL(1);\n    //更新图片\n    if (framesGroup.children[id]) framesGroup.children[id].src = base64;\n    videos[id].preview = base64;\n}\n\n\nfunction createVideoData() {\n    // 背景音乐\n    let backgroudAudio = null;\n    let _videos = videos2array();\n    var videosNew = Array.from(_videos, v => {\n        if (v && v.url) {\n            let index = v.index;\n            let textImage = null;\n            let content = null;\n            // console.log(v)\n            if (v.type === 'audio') {\n                backgroudAudio = v;\n            } else {\n                Array.from(v.layout || [], l => {\n                    //console.log(l)\n                    if (l.type == 'textbox') {\n                        textImage = {\n                            text: v.text,\n                            base64: v.textImage,\n                            loop: getTextLoop(v.text),\n                            layout: getLayout(l)\n                        };\n                        if (!v.text) textImage = null;\n                    } else if (l.type == 'image') {\n\n                        content = {\n                            type: v.type,\n                            url: v.url,\n                            // loop: 5,\n                            layout: getLayout(l)\n                        };\n                    };\n\n                });\n            }\n            return (content || textImage) ? {\n                index,\n                content,\n                textImage\n            } : null\n        }\n    }).filter(f => f);\n    let finishData = {\n        width: _WIDTH * _SCALE,\n        height: _HEIGHT * _SCALE,\n        // 按照index升序\n        frames: videosNew.sort((a, b) => a.index - b.index),\n        backgroudAudio: backgroudAudio\n    };\n    // console.log(finishData)\n    return finishData\n}\n\n// 更新布局layout\nconst updateLayout = json => {\n    return Array.from(json.objects, o => {\n        // console.log(o)\n        let no = { left: o.left, top: o.top, width: o.width, height: o.height, type: o.type };\n        if (o.type == 'textbox') {\n            no = Object.assign(no, textStyleExtract(o))\n        } else if (o.type == 'image') {\n            no = Object.assign(no, contentStyleExtract(o))\n        }\n        return no\n    });\n};\n\nasync function baseData(labVideo) {\n    // 帧数据\n    let videoObj = createFrameData(labVideo);\n    labVideo.type !== 'audio' ? videoObjId = videoObj.id : null;\n    // 去重？?\n    // if (Array.from(videos, v => v.id).includes(videoObj.id)) return console.log(labVideo);\n    if (labVideo.type == 'audio') {\n        //背景音乐\n        let element = await Lab.base.createaAudio(labVideo.url, false);\n        videoObj = Object.assign(videoObj, {\n            duration: element.duration,\n            startTime: 0,\n            loop: 5\n        })\n    };\n    return videoObj\n}\n\nfunction updateData(id, json) {\n    // console.log('更新数据',videos[id],json)\n    // console.log(updateLayout(json))\n    videos[id] = Object.assign(videos[id], {\n        layout: updateLayout(json || pc.exportJSON())\n    })\n    _save();\n}\n\nasync function baseAddBackgroundAudio(labVideo) {\n    if (audioGroup.querySelector('audio')) audioGroup.querySelector('audio').remove();\n    audioGroup.appendChild(await Lab.base.createaAudio(labVideo.url, false));\n}\n\n\nasync function baseAddVideo(labVideo, isNew = true) {\n    // console.log(labVideo)\n    //  console.log(labVideo.preview)\n    if (labVideo) {\n\n        //添加到画布 \n        pc.reset();\n        // 背景\n        pc.addRect({\n            width: _WIDTH,\n            height: _HEIGHT,\n            fill: 'black',\n            stroke: 'black'\n        }, false);\n\n        // 内容\n        let { element, style } = await getContentAndStyle(labVideo);\n        // console.log(element)\n        if (labVideo.type == \"video\") {\n            pc.addVideo(element,\n                Object.assign(style, {\n                    objectCaching: false\n                }));\n        } else if (labVideo.type == \"img\") {\n            pc.addImg(element, style);\n        };\n\n        // 字幕\n        let { element: text, style: ts } = getTextAndStyle(labVideo);\n        if (text) pc.addText(text, ts);\n\n        //最后\n        // 创建预览图片\n        if (isNew === true) await sleep(() => createPreviewImg(labVideo.id), 200);\n\n    };\n};\n\nfunction sleep(fn, t = 500) {\n    return new Promise((resolve, reject) => {\n        setTimeout(() => {\n            if (fn) fn();\n            resolve();\n        }, t);\n    });\n}\n\n// 缓存\nstore.getValues().then(async vs => {\n    // console.log(vs)\n    await store.clear();\n    if (vs[0]) {\n        _WIDTH = vs[0].width;\n        _HEIGHT = vs[0].height;\n        _SCALE = vs[0].scale;\n        if (outputVideo && outputVideo.src) (outputVideo.src = vs[0].outputVideo) && outputVideo.play();\n        let ds = (vs[0].videos || []);\n        ds = ds.sort((a, b) => a.index - b.index);\n        for (let i = 0; i < ds.length; i++) {\n            videos[ds[i].id] = ds[i];\n            if (ds[i].type === 'audio') {\n                await baseAddBackgroundAudio(ds[i]);\n            } else {\n                await baseAddVideo(ds[i]);\n            };\n            videoObjId = ds[i].id;\n        };\n        _save();\n    }\n});\n// videos object转array\nfunction videos2array() {\n    let vs = [];\n    for (let id in videos) {\n        vs.push(videos[id])\n    };\n    vs = vs.sort((a, b) => a.index - b.index);\n    return vs;\n}\n// 保存\nfunction _save() {\n    let vs = videos2array();\n    store.set(storeKey, {\n        videos: vs,\n        width: _WIDTH,\n        height: _HEIGHT,\n        scale: _SCALE,\n        outputVideo: outputVideo && outputVideo.src && outputVideo.src.match('.mp4') ? outputVideo.src : null\n    });\n}\n\n",
  "code_length": 155,
  "size": [
    410,
    675
  ],
  "extname": "designlabplugin",
  "version": "0.1.1",
  "package_id": "b2115e53944d487b79fb713372173bdf63969bc9",
  "create_time": 1614572963232
}